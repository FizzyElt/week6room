(function(t){function e(e){for(var o,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],a[s]&&h.push(a[s][0]),a[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);m&&m(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},a={app:0},i=[];function s(t){return r.p+"js/"+({about:"about"}[t]||t)+"."+{about:"bcf78329"}[t]+".js"}function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,o){n=a[t]=[e,o]});e.push(n[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(t),i=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+o+": "+i+")");s.type=o,s.request=i,n[1](s)}a[t]=void 0}};var l=setTimeout(function(){i({type:"timeout",target:c})},12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0211":function(t,e,n){},1165:function(t,e,n){},"21bb":function(t,e,n){"use strict";var o=n("1165"),a=n.n(o);a.a},"3dd0":function(t,e,n){"use strict";var o=n("ea0f"),a=n.n(o);a.a},4633:function(t,e,n){},4663:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("e382");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),n("router-view")],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"nav"},[n("div",{staticClass:"top-nav-container"},[n("div",{staticClass:"logo"},[n("span",[t._v("TRAVEL")])]),n("div",{staticClass:"nav-text"},[n("span",[t._v("找房源")])])])])}],s={},r=s,c=(n("5c0b"),n("2877")),l=Object(c["a"])(r,a,i,!1,null,null,null),u=l.exports,m=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("div",{staticClass:"room-items-container"},[n("div",{staticClass:"room-items-center"},t._l(t.RoomListData,function(t){return n("roomCard",{attrs:{item:t}})}),1)])])},d=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-btn-container"},[n("div",{staticClass:"room-btn-list"},[n("button",{staticClass:"room-list-btn room-list-btn-active"},[t._v("精選房源")]),n("button",{staticClass:"room-list-btn"},[t._v("好評房源")]),n("button",{staticClass:"room-list-btn"},[t._v("特殊房源")]),n("button",{staticClass:"room-list-btn"},[t._v("評價房源")])])])}],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-card",style:{"background-image":"url("+t.item.imageUrl+")"},on:{click:function(e){return t.goRoom()}}},[n("div",{staticClass:"room-data-container"},[n("h3",{staticClass:"room-name"},[t._v(t._s(t.item.name))]),n("div",[n("div",{staticClass:"pay-container"},[n("h3",[t._v("平日(一~四)")]),n("h3",[t._v("$NT "+t._s(t.item.normalDayPrice)+"/晚")])]),n("div",{staticClass:"pay-container"},[n("h3",[t._v("假日(五~日)")]),n("h3",[t._v("$NT "+t._s(t.item.holidayPrice)+"/晚")])])])])])},p=[],f={props:{item:Object},methods:{goRoom:function(){this.$router.push({name:"room",params:{roomId:this.item.id}})}}},g=f,b=(n("dc7c"),Object(c["a"])(g,v,p,!1,null,"6ab916e2",null)),_=b.exports,k={components:{roomCard:_},data:function(){return{RoomListData:null,roomdata:{id:"3Elqe8kfMxdZv5xFLV4OUeN6jhmxIvQSTyj4eTgIowfIRvF4rerA2Nuegzc2Rgwu",imageUrl:"https://images.unsplash.com/photo-1551776235-dde6d482980b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2134&q=80",normalDayPrice:1380,holidayPrice:1500,name:"Single Room"}}},methods:{getRoomList:function(){var t=this,e=this.$store.state.token,n="https://challenge.thef2e.com/api/thef2e2019/stage6/rooms",o={headers:{Authorization:"Bearer "+e}};this.axios.get(n,o).then(function(e){t.RoomListData=e.data.items}).catch()}},created:function(){this.getRoomList()},mounted:function(){}},C=k,D=(n("21bb"),Object(c["a"])(C,h,d,!1,null,null,null)),y=D.exports,O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.dataOk?n("div",{staticClass:"room-detail-container"},[n("roomImageShow",{attrs:{imgUrlList:t.roomData.imageUrl}}),n("div",{staticClass:"room-detail"},[n("roomDetailNav",{attrs:{itemList:t.navData}}),n("div",{staticClass:"room-content-box"},[n("roomDescription",{attrs:{roomName:t.roomData.name,roomDescription:t.roomData.description,roomAmenities:t.amenitiesListFilter(t.roomData.amenities)}}),n("roomBook",{attrs:{bookedList:t.bookingDayList,roomId:t.roomId,price:t.getPrice(t.roomData.normalDayPrice,t.roomData.holidayPrice)}})],1)],1)],1):t._e()},N=[],w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"img-show-container"},[n("div",{staticClass:"img-main-box"},[n("img",{staticClass:"main-img",attrs:{src:t.imgUrlList[t.imgIndex]}})]),n("div",{staticClass:"img-list-box"},t._l(t.imgUrlList,function(e,o){return n("img",{attrs:{src:e},on:{click:function(e){return t.mainImgChange(o)}}})}),0)])},x=[],L={props:{imgUrlList:Array},data:function(){return{imgIndex:1}},methods:{mainImgChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.imgIndex=t}}},S=L,T=(n("5978"),Object(c["a"])(S,w,x,!1,null,"0e4a0d57",null)),j=T.exports,I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"detail-nav"},[n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("房間人數:")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.descriptionShort.GuestMin)+"~"+t._s(t.itemList.descriptionShort.GuestMax)+"人")])]),n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("床型:")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.descriptionShort.Bed.join()))])]),n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("房間大小:")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.descriptionShort.Footage)+" 平方公尺")])]),n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("衛浴數量")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.descriptionShort["Private-Bath"]))])]),n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("CheckIn時間")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.checkInAndOut.checkInEarly)+"~"+t._s(t.itemList.checkInAndOut.checkInLate))])]),n("div",{staticClass:"content-box"},[n("h3",{staticClass:"content-title"},[t._v("CheckOut時間")]),n("h2",{staticClass:"content"},[t._v(t._s(t.itemList.checkInAndOut.checkOut))])])])},P=[],$={props:{itemList:Object}},A=$,E=(n("b889"),Object(c["a"])(A,I,P,!1,null,"31fbead4",null)),F=E.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"room-content-container"},[n("div",{staticClass:"description-container"},[n("h2",{staticClass:"room-title"},[t._v(t._s(t.roomName))]),n("p",[t._v(t._s(t.roomDescription))])]),n("div",{staticClass:"amenities-container"},[n("h2",[t._v("設備與服務")]),n("ul",{staticClass:"service-list"},t._l(t.roomAmenities,function(e){return n("li",{staticClass:"service-item"},[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:e.iconName}}),n("span",[t._v(t._s(e.name)+"："+t._s(e.isOpen?"有":"無"))])],1)}),0)])])},R=[],B={props:{roomName:String,roomDescription:String,roomAmenities:Array},methods:{},created:function(){},mounted:function(){}},U=B,H=(n("fa95"),Object(c["a"])(U,M,R,!1,null,"9396da08",null)),q=H.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-card-container"},[n("div",{staticClass:"price-container"},[n("div",{staticClass:"price-box"},[n("h3",[t._v("平日(一~四)")]),n("h1",[t._v("$NT "+t._s(t.price.normal)+"/晚")])]),n("div",{staticClass:"price-box"},[n("h3",[t._v("假日(五~日)")]),n("h1",[t._v("$NT "+t._s(t.price.holiday)+"/晚")])])]),n("div",{staticClass:"form-container"},[n("div",[n("h2",[t._v("姓名")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"name-input",class:{warn:t.isName},attrs:{type:"text",name:"name",placeholder:"王小明"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("div",[n("h2",[t._v("電話")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"phone-input",class:{warn:t.phoneCheck},attrs:{type:"text",name:"phone-number",placeholder:"0912345678"},domProps:{value:t.phoneNum},on:{input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}}),t.isphone?n("p",{staticClass:"date-err-text"},[t._v("電話未填")]):t._e()]),n("div",[n("h2",[t._v("日期")]),n("HotelDatePicker",{attrs:{closeDatepickerOnClickOutside:!1,endDate:t.bookingEndDay,disabledDates:t.bookList},on:{"check-in-changed":t.getCheckInDate,"check-out-changed":t.getCheckOutDate}}),t.postCheck?n("p",{staticClass:"date-err-text"},[t._v("日期未填寫正確")]):t._e()],1),n("div",{staticClass:"total-container",class:{"total-container-open":t.calcTotal.Open}},[n("div",[n("p",[t._v("平日 $NT"+t._s(t.price.normal)+"x"+t._s(t.calcTotal.normal.count))]),n("p",[t._v("$NT "+t._s(t.calcTotal.normal.total))])]),n("div",[n("p",[t._v("假日 $NT"+t._s(t.price.holiday)+"x"+t._s(t.calcTotal.holiday.count))]),n("p",[t._v("$NT "+t._s(t.calcTotal.holiday.total))])]),n("div",[n("p",[t._v("服務費")]),n("p",[t._v("$NT "+t._s(t.calcTotal.serviceFee)+"(10%)")])]),n("div",[n("p",[t._v("總計")]),n("h2",[t._v("$NT "+t._s(t.calcTotal.total))])])]),n("button",{staticClass:"post-btn",on:{click:function(e){return t.dataPost()}}},[t._v("預訂房間")]),n("div",{staticClass:"book-success-view",class:{"success-open":t.bookSuccess}},[n("div",[n("font-awesome-icon",{staticClass:"success-icon",attrs:{icon:["fas","check-circle"]}}),n("h2",[t._v("預訂成功")]),n("button",{on:{click:function(e){return t.goHomePage()}}},[t._v("回首頁")])],1)])])])},Y=[],G=(n("7f7f"),n("6b54"),n("549f")),V=n.n(G),W={components:{HotelDatePicker:V.a},props:{price:Object,roomId:String,bookedList:Array},data:function(){return{name:"",phoneNum:"",isName:!1,isphone:!1,checkinDay:{str:"",ms:0},checkoutDay:{str:"",ms:0},bookingEndDay:"",postCheck:!1,newBooking:[],bookSuccess:!1}},computed:{phoneCheck:function(){var t=/^09[0-9]{8,8}$/.test(this.phoneNum);return""!==this.phoneNum&&!t},calcTotal:function(){if(""!==this.checkinDay.str&&""!==this.checkoutDay.str&&this.checkinDay.ms<this.checkoutDay.ms){var t=this.checkinDay.str,e=this.checkoutDay.str,n=this.calcNormalAndHoliday(t,e),o=n.nCount*this.price.normal,a=n.hCount*this.price.holiday,i=parseInt(.1*(o+a)),s=o+a+i;return{Open:!0,normal:{total:o,count:n.nCount},holiday:{total:a,count:n.hCount},serviceFee:i,total:s}}return{Open:!1,normal:{total:0,count:0},holiday:{total:0,count:0},serviceFee:0,total:0}},bookList:function(){return this.bookedList.concat(this.newBooking)}},methods:{goHomePage:function(){this.$router.push({name:"home"})},calcNormalAndHoliday:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""!==t&&""!==e){var n=new Date(t),o=new Date(e),a=0,i=0;while(n.toDateString()!==o.toDateString()){var s=n.getDay();this.checkWeekDay(s)?a++:i++,n.setDate(n.getDate()+1)}return{nCount:a,hCount:i}}},checkWeekDay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 1===t||2===t||3===t||4===t},getCheckInDate:function(t){null!==t&&(this.checkinDay.str=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.checkinDay.ms=t.valueOf())},getCheckOutDate:function(t){null!==t&&(this.checkoutDay.str=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),this.checkoutDay.ms=t.valueOf())},setEndDay:function(){var t=new Date,e=90;t.setDate(t.getDate()+e);var n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();this.bookingEndDay=n},getDayArray:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t<10?"0"+t.toString():t.toString()};if(""!==t&&""!==e){var a="",i=new Date(t),s=new Date(e);while(i.toDateString()!==s.toDateString()){var r=o(i.getFullYear()),c=o(i.getMonth()+1),l=o(i.getDate());a=r+"-"+c+"-"+l,n.push(a),i.setDate(i.getDate()+1)}return n}return n},dataPost:function(){var t=this,e=/^09[0-9]{8,8}$/.test(this.phoneNum),n="https://challenge.thef2e.com/api/thef2e2019/stage6/room/";if(""!==this.name&&e&&0!==this.calcTotal.total){var o=this.$store.state.token,a=n+this.roomId,i=this.getDayArray(this.checkinDay.str,this.checkoutDay.str),s={headers:{Authorization:"Bearer "+o,"Content-Type":"application/json"}},r=JSON.stringify({name:this.name,tel:this.phoneNum,date:i});this.axios.post(a,r,s).then(function(e){t.newBooking=i,t.bookSuccess=!0}).catch(function(t){}),this.isName=!1,this.postCheck=!1,this.isphone=!1}else""===this.name&&(this.isName=!0),0===this.calcTotal.total&&(this.postCheck=!0),""===this.phoneNum&&(this.isphone=!0)}},created:function(){this.setEndDay()},mounted:function(){}},z=W,Q=(n("a20f"),Object(c["a"])(z,J,Y,!1,null,"23a4f56e",null)),X=Q.exports,Z={components:{roomImageShow:j,roomDetailNav:F,roomDescription:q,roomBook:X},data:function(){return{roomData:null,dataOk:!1,bookedList:[],roomId:""}},computed:{navData:function(){var t=this.roomData.descriptionShort,e=this.roomData.checkInAndOut;return{descriptionShort:t,checkInAndOut:e}},bookingDayList:function(){return this.bookedList.length?this.bookedList.map(function(t){return t.date}):[]}},methods:{getRoomData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="https://challenge.thef2e.com/api/thef2e2019/stage6/room/",o=n+e,a=this.$store.state.token,i={headers:{Authorization:"Bearer "+a}};this.roomId=e,e?this.axios.get(o,i).then(function(e){t.roomData=e.data.room[0],t.dataOk=!0,t.bookedList=e.data.booking}).catch():console.log("no id")},getPrice:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{normal:t,holiday:e}},amenitiesListFilter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[{name:"wifi",isOpen:t["Wi-Fi"],iconName:"wifi"},{name:"早餐",isOpen:t["Breakfast"],iconName:"coffee"},{name:"Mini-Bar",isOpen:t["Mini-Bar"],iconName:"wine-glass-alt"},{name:"Room Service",isOpen:t["Room-Service"],iconName:"concierge-bell"},{name:"電視",isOpen:t["Television"],iconName:"tv"},{name:"空調",isOpen:t["Air-Conditioner"],iconName:"wind"},{name:"冰箱",isOpen:t["Refrigerator"],iconName:"door-closed"},{name:"沙發",isOpen:t["Sofa"],iconName:"couch"},{name:"漂亮的視野",isOpen:t["Great-View"],iconName:"mountain"},{name:"允許吸菸",isOpen:t["Smoke-Free"],iconName:"smoking"},{name:"適合兒童",isOpen:t["Child-Friendly"],iconName:"baby"},{name:"寵物攜帶",isOpen:t["Pet-Friendly"],iconName:"dog"}];return e}},created:function(){this.getRoomData(this.$route.params.roomId||"YovqNpFDaal598jbpd1A14gXwDE6gekTqJgxOAGcq78B8YnP7claymQVFy2GTwgb")}},K=Z,tt=(n("3dd0"),Object(c["a"])(K,O,N,!1,null,null,null)),et=tt.exports;o["a"].use(m["a"]);var nt=new m["a"]({routes:[{path:"/",name:"home",component:y},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/room",name:"room",component:et}]}),ot=n("2f62");o["a"].use(ot["a"]);var at=new ot["a"].Store({state:{token:"CEbxfNpkDjPUn3MLuJpjWSkpb270wMP4Of7i9Cul1MkFLHVA8qTkunvwR9fa"},mutations:{},actions:{}}),it=n("bc3a"),st=n.n(it),rt=n("a7fe"),ct=n.n(rt),lt=n("ecee"),ut=n("c074"),mt=n("ad3d");lt["c"].add(ut["k"],ut["c"],ut["m"],ut["d"],ut["j"],ut["l"],ut["g"],ut["e"],ut["h"],ut["i"],ut["a"],ut["f"],ut["b"]),o["a"].component("font-awesome-icon",mt["a"]),o["a"].config.productionTip=!1,o["a"].use(ct.a,st.a),new o["a"]({router:nt,store:at,render:function(t){return t(u)}}).$mount("#app")},5978:function(t,e,n){"use strict";var o=n("4663"),a=n.n(o);a.a},"5c0b":function(t,e,n){"use strict";var o=n("4633"),a=n.n(o);a.a},6157:function(t,e,n){},"74c3":function(t,e,n){},"74df":function(t,e,n){},a20f:function(t,e,n){"use strict";var o=n("74c3"),a=n.n(o);a.a},b889:function(t,e,n){"use strict";var o=n("74df"),a=n.n(o);a.a},dc7c:function(t,e,n){"use strict";var o=n("6157"),a=n.n(o);a.a},e382:function(t,e,n){},ea0f:function(t,e,n){},fa95:function(t,e,n){"use strict";var o=n("0211"),a=n.n(o);a.a}});
//# sourceMappingURL=app.a9990d55.js.map